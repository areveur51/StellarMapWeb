@startuml Data Pipeline

skinparam backgroundColor #261D45
skinparam activity {
    BackgroundColor #100D23
    BorderColor #0BE784
    FontColor #96DDF2
}
skinparam activityArrowColor #01C176
skinparam activityStartColor #0BE784
skinparam activityStopColor #E5526F
skinparam defaultFontColor #96DDF2
skinparam note {
  BackgroundColor #231B3D
  BorderColor #3f2c70
  FontColor #96DDF2
}

title <color:#0BE784>8-Stage Data Pipeline (2-3 minutes)

start

:User Searches Address;

:Stage 1: Make Parent Lineage;
note right #231B3D
  <color:#0BE784>Status: <color:#96DDF2>PENDING_MAKE_PARENT_LINEAGE
  Creates initial lineage records
end note

:Stage 2: Collect Horizon Data;
note right #231B3D
  <color:#96DDF2>Fetches operations & effects
  Validates with Horizon API
end note

:Stage 3: Account Attributes;
note right #231B3D
  <color:#96DDF2>Collects home_domain
  and XLM balance
end note

:Stage 4: Account Assets;

:Stage 5: Account Flags;

:Stage 6: SE Directory;
note right #231B3D
  <color:#96DDF2>Stellar Expert enrichment
  Enhanced metadata
end note

:Stage 7: Account Creator;

:Stage 8: Make Grandparent;
note right #231B3D
  <color:#0BE784>Status: <color:#96DDF2>DONE_GRANDPARENT_LINEAGE
  Creates ancestor lineage
end note

stop

note left #231B3D
  <color:#0BE784>Pipeline Features:
  <color:#96DDF2>• Sequential execution
  • Runs every 2 minutes
  • Real-time stage tracking
  • Automatic stuck recovery
  • Terminal status handling
end note

@enduml
