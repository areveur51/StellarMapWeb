@startuml System Overview

skinparam backgroundColor #261D45
skinparam defaultFontColor #96DDF2

skinparam component {
  BackgroundColor #100D23
  BorderColor #0BE784
  FontColor #96DDF2
  ArrowColor #01C176
}

skinparam cloud {
  BackgroundColor #100D23
  BorderColor #0BE784
  FontColor #96DDF2
}

skinparam database {
  BackgroundColor #100D23
  BorderColor #0BE784
  FontColor #96DDF2
}

skinparam package {
  BackgroundColor #231B3D
  BorderColor #3f2c70
  FontColor #96DDF2
}

skinparam actor {
  BackgroundColor #0BE784
  BorderColor #0BE784
  FontColor #100D23
}

skinparam note {
  BackgroundColor #231B3D
  BorderColor #3f2c70
  FontColor #96DDF2
}

title <color:#0BE784>System Overview

actor User #0BE784

package "Frontend Layer" #231B3D {
  component "Vue.js + D3.js\nVisualization" as Frontend
}

package "Django Application" #231B3D {
  component "webApp" as WebApp
  component "apiApp" as ApiApp
  component "radialTidyTreeApp" as RadialApp
}

package "Background Services" #231B3D {
  component "BigQuery Pipeline\n(50-90 sec processing)" as BQPipeline #0BE784
  component "API Pipeline (Educational)\n(8-stage, 2-3 min)" as APIPipeline
}

cloud "Data Sources" #231B3D {
  database "BigQuery/Hubble\n(Stellar Dataset)" as BigQuery #0BE784
  component "Horizon API" as Horizon
  component "Stellar Expert" as Expert
}

database "Astra DB\n(Cassandra)" as DB

User -[#01C176]-> Frontend : "Views"
Frontend -[#01C176]-> WebApp : "HTTP"
WebApp -[#01C176]-> ApiApp : "API Calls"
ApiApp -[#01C176]-> DB : "Queries\n(88% optimized)"
BQPipeline -[#0BE784,bold]-> BigQuery : "<b>Primary Data Source"
BQPipeline -[#01C176]-> DB : "Stores"
APIPipeline -[#96DDF2,dashed]-> Horizon : "(Educational)"
APIPipeline -[#96DDF2,dashed]-> Expert : "(Reference)"

note right of BQPipeline #231B3D
  <color:#0BE784>Primary Pipeline:
  <color:#96DDF2>• 4 optimized queries
  <color:#96DDF2>• No API rate limits
  <color:#96DDF2>• 2-3x faster
  <color:#96DDF2>• Up to 100K children/parent
end note

note right of APIPipeline #231B3D
  <color:#96DDF2>Educational/Reference:
  <color:#96DDF2>• 8-stage sequential
  <color:#96DDF2>• Horizon + Expert APIs
  <color:#96DDF2>• Not enabled by default
end note

@enduml
