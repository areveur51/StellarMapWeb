# Edit this file to introduce tasks to be run by cron.
#
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
#
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').
#
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
#
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
#
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
#
# For more information see the manual pages of crontab(5) and cron(8)
#
# m h dom mon dow command

# Health check: Every 5 min (low load, frequent for resets)
*/5 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_health_check > /dev/null 2>&1

# Parent: Every 5 min, offset 0 (starts chain)
0,5,10,15,20,25,30,35,40,45,50,55 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_make_parent_account_lineage > /dev/null 2>&1

# Horizon data: Every 10 min, offset 1 (after parent, API heavy)
1,11,21,31,41,51 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_collect_account_horizon_data > /dev/null 2>&1

# Attributes: Every 5 min, offset 2 (post-horizon)
2,7,12,17,22,27,32,37,42,47,52,57 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_collect_account_lineage_attributes > /dev/null 2>&1

# Assets: Every 5 min, offset 3
3,8,13,18,23,28,33,38,43,48,53,58 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_collect_account_lineage_assets > /dev/null 2>&1

# Flags: Every 5 min, offset 4
4,9,14,19,24,29,34,39,44,49,54,59 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_collect_account_lineage_flags > /dev/null 2>&1

# SE directory: Every 5 min, offset 0 (parallel to flags if non-dependent)
0,5,10,15,20,25,30,35,40,45,50,55 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_collect_account_lineage_se_directory > /dev/null 2>&1

# Creator: Every 5 min, offset 1 (after SE/flags)
1,6,11,16,21,26,31,36,41,46,51,56 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_collect_account_lineage_creator > /dev/null 2>&1

# Grandparent: Every 10 min, offset 2 (end of chain)
2,12,22,32,42,52 * * * * nice -n 10 /home/revobrera/smenv/bin/python /home/revobrera/StellarMapWeb/StellarMapWeb/manage.py cron_make_grandparent_account_lineage > /dev/null 2>&1